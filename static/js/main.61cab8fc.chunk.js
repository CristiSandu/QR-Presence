(this["webpackJsonpmpso-qr-code-react"]=this["webpackJsonpmpso-qr-code-react"]||[]).push([[0],{110:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(59),i=a.n(r),s=(a(74),a(3)),o=a(2),l=a(65),u=a(6),d=(a(46),a(1));function j(e){return Object(d.jsxs)("nav",{className:"navbar navbar-expand-lg light-blue-background white-text-font",children:[Object(d.jsx)("span",{className:"navbar-brand",children:"QR Scanner"}),Object(d.jsx)("button",{className:"navbar-toggler navbar-light",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(d.jsx)("span",{className:"navbar-toggler-icon"})}),Object(d.jsx)("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup",style:{flexDirection:"row-reverse"},children:Object(d.jsxs)("div",{className:"navbar-nav",children:[e.loggedIn?Object(d.jsx)("a",{className:"nav-item nav-link header-options-text-size white-text-font",href:"/",children:"Home"}):"",e.loggedIn?Object(d.jsx)("a",{className:"nav-item nav-link header-options-text-size white-text-font",href:"/statistics",children:"Statistics"}):"",Object(d.jsx)("a",{className:"nav-item nav-link header-options-text-size white-text-font",href:"/about",children:"About"}),e.loggedIn?Object(d.jsx)("a",{className:"nav-item nav-link header-options-text-size white-text-font",href:"/logout",children:"Logout"}):Object(d.jsx)("a",{className:"nav-item nav-link header-options-text-size white-text-font",href:"/login",children:"Login"})]})})]})}var h=a(76),b="http://3.18.103.144:8080",f="".concat(b,"/api/user/authentication/login"),m="".concat(b,"/api/qr/teacher/generate-qr-id"),p="".concat(b,"/api/qr/teacher/update-qr-key"),v="".concat(b,"/api/user/teacher/profile"),x="".concat(b,"/api/upcoming/courses"),g="".concat(b,"/api/subject/teacher/courses/brief"),O="".concat(b,"/api/subject/teacher/courses/details");function w(e,t,a,n){h({method:"get",url:g,headers:{Authorization:"Bearer ".concat(t),"content-type":"application/json; charset=utf-8"}}).then((function(e){a(e)}),(function(e){n(e)}))}function N(e,t,a,n){h({method:"get",url:O,headers:{Authorization:"Bearer ".concat(t),"content-type":"application/json; charset=utf-8"}}).then((function(e){a(e)}),(function(e){n(e)}))}function y(e,t,a,n){h({method:"get",url:v,data:e,headers:{Authorization:"Bearer ".concat(t),"content-type":"application/json; charset=utf-8"}}).then((function(e){a(e)}),(function(e){n(e)}))}function S(e,t,a,n){h({method:"get",url:x,headers:{Authorization:"Bearer ".concat(t),"content-type":"application/json; charset=utf-8"}}).then((function(e){a(e)}),(function(e){n(e)}))}function k(e,t,a,n){h({method:"patch",url:p,data:e,headers:{Authorization:"Bearer ".concat(t),"content-type":"application/json; charset=utf-8"}}).then((function(e){a(e)}),(function(e){n(e)}))}function q(e){var t=Object(n.useState)(""),a=Object(o.a)(t,2),c=a[0],r=a[1],i=Object(n.useState)(""),s=Object(o.a)(i,2),l=s[0],u=s[1],j=function(t){t&&t.data&&e.onLoginSuccesful(t.data.jwt_token)},b=function(e){console.log("Failed login"),console.log(e)};return Object(d.jsx)("div",{className:"flex-container-row-center full-height-vw",children:Object(d.jsx)("div",{style:{width:"400px",marginTop:"50px"},children:Object(d.jsxs)("form",{children:[Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"loginEmail",children:"Email address"}),Object(d.jsx)("input",{type:"email",value:c,onChange:function(e){return r(e.target.value)},className:"form-control",id:"loginEmail","aria-describedby":"emailHelp",placeholder:"Enter email"}),Object(d.jsx)("small",{id:"emailHelp",className:"form-text text-muted",children:"Please login using the LDAP account"})]}),Object(d.jsxs)("div",{className:"form-group",children:[Object(d.jsx)("label",{htmlFor:"loginPassword",children:"Password"}),Object(d.jsx)("input",{type:"password",value:l,onChange:function(e){return u(e.target.value)},className:"form-control",id:"loginPassword",placeholder:"Password"})]}),Object(d.jsx)("button",{className:"btn btn-primary",onClick:function(e){var t,a;e.preventDefault(),c&&l&&(t=j,a=b,h({method:"post",url:f,data:{email:c,password:l},headers:{"content-type":"application/json; charset=utf-8"}}).then((function(e){t(e)}),(function(e){a(e)})))},children:"Submit"})]})})})}function C(e){return Object(n.useEffect)((function(){e.onLogoutSuccesful()})),null}var _=a(60),I=a(61),z=a(69),A=a(68),E=a.p+"static/media/stefan_n.ce565bc5.png",R=a.p+"static/media/stefan_p.46ffd688.png",Q=a.p+"static/media/cristi_s.81c890d7.png",B=a.p+"static/media/tudor_c.700649db.png",F=a.p+"static/media/maria_c.d16c0482.png",L=a.p+"static/media/stela_j.a5ae9691.png",P=function(e){Object(z.a)(a,e);var t=Object(A.a)(a);function a(){return Object(_.a)(this,a),t.apply(this,arguments)}return Object(I.a)(a,[{key:"render",value:function(){return Object(d.jsx)("div",{className:"flex-container-row-center full-height-vw",children:Object(d.jsxs)("div",{className:"flex-container-column-center",style:{maxWidth:"1000px"},children:[Object(d.jsx)("h2",{className:"center-text",children:"Authors"}),Object(d.jsxs)("div",{className:"flex-container-row",style:{justifyContent:"inherit"},children:[Object(d.jsx)("div",{children:Object(d.jsx)("img",{src:E,alt:"Stefan Nedelcu",className:"avatar rounded-avatar-image author-avatar-width avatar-margin avatar-border"})}),Object(d.jsx)("div",{children:Object(d.jsx)("img",{src:R,alt:"Stefan Popa",className:"avatar rounded-avatar-image author-avatar-width avatar-margin avatar-border"})}),Object(d.jsx)("div",{children:Object(d.jsx)("img",{src:Q,alt:"Cristi Sandu",className:"avatar rounded-avatar-image author-avatar-width avatar-margin avatar-border"})}),Object(d.jsx)("div",{children:Object(d.jsx)("img",{src:B,alt:"Tudor Calafateanu",className:"avatar rounded-avatar-image author-avatar-width avatar-margin avatar-border"})}),Object(d.jsx)("div",{children:Object(d.jsx)("img",{src:F,alt:"Maria Calafateanu",className:"avatar rounded-avatar-image author-avatar-width avatar-margin avatar-border"})}),Object(d.jsx)("div",{children:Object(d.jsx)("img",{src:L,alt:"Stefana Josan",className:"avatar rounded-avatar-image author-avatar-width avatar-margin avatar-border"})})]})]})})}}]),a}(n.Component),D=a(9),T=a.n(D),J=a(19),M=a(62),W=a.n(M),H=a(44),K=a(26);function Y(){var e=Object(n.useState)(),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)([]),i=Object(o.a)(r,2),s=i[0],l=i[1],u=Object(n.useState)([]),j=Object(o.a)(u,2),b=j[0],f=j[1],p=Object(n.useState)(),v=Object(o.a)(p,2),x=v[0],g=v[1],O=Object(n.useState)(),w=Object(o.a)(O,2),y=w[0],S=w[1],q=Object(n.useState)(0),C=Object(o.a)(q,2),_=C[0],I=C[1],z=Object(n.useState)(0),A=Object(o.a)(z,2),E=A[0],R=A[1],Q=Object(n.useState)(),B=Object(o.a)(Q,2),F=B[0],L=B[1],P=Object(n.useState)(),D=Object(o.a)(P,2),M=D[0],Y=D[1],U=Object(n.useState)(!1),G=Object(o.a)(U,2),V=G[0],Z=G[1],$=Object(n.useContext)(X);Object(n.useEffect)((function(){var e=function(){var e=Object(J.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:N(0,localStorage.getItem("user"),ee,te);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[]);var ee=function(e){var t=JSON.parse(JSON.stringify(e.data));c(t),l(t.map((function(e,t){return{index:t,id:e.id,title:e.title}}))),f([]),g(),S(),I(0),R(0)},te=function(){c(),l([]),f([]),g(),S(),I(0),R(0)};Object(n.useEffect)((function(){var e,t,a,n;x&&y&&(M?k({qr_id:M,key:F},localStorage.getItem("user"),re,ie):(e={schedule:Number(y.id_interval),subject:Number(x.id_curs),reps:E,offset:_,key:F},t=localStorage.getItem("user"),a=ne,n=ce,h({method:"post",url:m,data:e,headers:{Authorization:"Bearer ".concat(t),"content-type":"application/json; charset=utf-8"}}).then((function(e){a(e)}),(function(e){n(e)}))))}),[F]),Object(n.useEffect)((function(){var e=function(){var e=Object(J.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(x&&M&&E){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,ue(1e3*_);case 4:E>1?de():se();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e()}),[M,E]);var ae=function(){return Math.floor(1e6*Math.random())},ne=function(e){console.log(e.data),Y(e.data.qr_id)},ce=function(e){console.log("Failure to submit QR")},re=function(e){R(E-1)},ie=function(e){console.log("Failure to update QR")},se=function(){k({qr_id:M,key:-1},localStorage.getItem("user"),oe,le)},oe=function(e){console.log("Successful QR finish"),Z(!0)},le=function(e){console.log("Failure to finish QR")},ue=function(e){return new Promise((function(t){return setTimeout(t,e)}))},de=function(){var e=Object(J.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:L(ae());case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(d.jsx)("div",{className:"flex-container-row-center",children:Object(d.jsxs)("div",{className:"flex-container-row qrsection-sections-margin-top",children:[Object(d.jsx)("div",{className:"aliceblue-background \r qrsection-sections-width \r qrsection-section-page-height",children:Object(d.jsxs)("div",{className:"flex-container-column-center qr-section-container",children:[Object(d.jsx)("p",{style:{fontSize:"1.2rem",fontWeight:"bold"},children:"Set up QR session"}),Object(d.jsxs)("div",{className:"flex-container-column",children:[Object(d.jsx)("div",{className:"qr-input-header",children:"Choose course: "}),Object(d.jsxs)("div",{className:"flex-container-row",style:{alignItems:"baseline"},children:[Object(d.jsx)(H.a,{title:"Subject",id:"dropdown-menu-align-right",onSelect:function(e){return g({index:(t=e).split("&")[0],id_curs:t.split("&")[1],title:t.split("&")[2]}),f(a[t.split("&")[0]].intervals),S(),I(0),void R(0);var t},children:s.map((function(e){return Object(d.jsx)(K.a.Item,{eventKey:e.index+"&"+e.id+"&"+e.title,children:e.title},e.index)}))}),x&&Object(d.jsxs)("p",{style:{marginLeft:"20px",fontSize:"1.1rem",color:"green"},children:['You choose "',x.title,'"']})]})]}),x?Object(d.jsxs)("div",{className:"flex-container-column",style:{marginTop:"20px"},children:[Object(d.jsx)("div",{className:"qr-input-header",children:"Choose interval: "}),Object(d.jsxs)("div",{className:"flex-container-row",style:{alignItems:"baseline"},children:[Object(d.jsx)(H.a,{title:"Interval",id:"dropdown-menu-align-right",onSelect:function(e){return S({id_interval:(t=e).split("&")[0],title:t.split("&")[1]}),I(0),void R(0);var t},children:b.map((function(e){return Object(d.jsx)(K.a.Item,{eventKey:e.id+"&"+e.interval,children:e.interval},e.id)}))}),y&&Object(d.jsxs)("p",{style:{marginLeft:"20px",fontSize:"1.1rem",color:"green"},children:['You choose "',y.title,'"']})]})]}):"",y&&x?Object(d.jsxs)("div",{className:"flex-container-column",style:{marginTop:"20px"},children:[Object(d.jsx)("div",{className:"qr-input-header",children:"Choose how much a QR should be available (min): "}),Object(d.jsx)("input",{type:"number",onChange:function(e){return t=e.target.value,I(Number(t)),void R(0);var t},className:"form-control",id:"qrDuration","aria-describedby":"qrDuration",placeholder:"Enter in seconds how much should the QR be available"})]}):"",y&&x&&_?Object(d.jsxs)("div",{className:"flex-container-column",style:{marginTop:"20px"},children:[Object(d.jsx)("div",{className:"qr-input-header",children:"Choose how many times should the QR be regenerated: "}),Object(d.jsx)("input",{type:"number",onChange:function(e){return t=e.target.value,void R(Number(t));var t},className:"form-control",id:"qrDuration","aria-describedby":"qrDuration",placeholder:"Enter in seconds how much should the QR be available"})]}):"",y&&x&&_&&E&&!V?Object(d.jsx)("div",{className:"white-text-font create-qr-button-style create-qr-button-width",onClick:function(){L(ae())},style:{backgroundColor:$.rose_budget},children:"Start QR"}):"",y&&x&&_&&E&&V?Object(d.jsxs)("div",{className:"flex-container-row",style:{alignItems:"baseline"},children:[Object(d.jsx)("div",{className:"white-text-font create-qr-button-style create-qr-button-width",onClick:function(){g(),S(),I(0),R(0),L(),Y(),Z(!1)},style:{backgroundColor:$.rose_budget},children:"Reset"}),Object(d.jsx)("span",{style:{marginLeft:"20px",fontSize:"1.1rem"},children:"Session is finished"})]}):""]})}),Object(d.jsxs)("div",{className:"cornsilk-background \r qrsection-sections-width \r qrsection-section-page-height",children:["'",M&&!V?Object(d.jsx)(W.a,{value:M+"/"+x.id_curs+"/"+F}):"",M&&!V?Object(d.jsx)("p",{children:M+"/"+x.id_curs+"/"+F}):""]})]})})}function U(){var e=Object(n.useState)([]),t=Object(o.a)(e,2),a=t[0],c=t[1],r=Object(n.useState)({}),i=Object(o.a)(r,2),s=i[0],l=i[1],u=Object(n.useState)([]),j=Object(o.a)(u,2),h=j[0],b=j[1],f=Object(n.useContext)(X);Object(n.useEffect)((function(){var e=function(){var e=Object(J.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:w(0,localStorage.getItem("user"),g,O);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),t=function(){var e=Object(J.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:y(null,localStorage.getItem("user"),v,x);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=Object(J.a)(T.a.mark((function e(){return T.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:S(0,localStorage.getItem("user"),m,p);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();e(),t(),a()}),[]);var m=function(e){return b(e&&e.data?e.data:[])},p=function(e){return b([])},v=function(e){return l(e&&e.data?e.data:{})},x=function(e){return l({})},g=function(e){return c(e&&e.data?JSON.parse(JSON.stringify(e.data)):[])},O=function(e){return c([])};return Object(d.jsx)("div",{className:"flex-container-row-center",children:Object(d.jsxs)("div",{className:"flex-container-row home-sections-margin-top",children:[Object(d.jsxs)("div",{className:"light-blue-background home-sections-width home-section-page-height",children:[Object(d.jsxs)("div",{className:"flex-container-row white-text-font",style:{alignItems:"center",justifyContent:"space-evenly",paddingTop:"20px"},children:[s?Object(d.jsxs)("div",{className:"flex-container-column",children:[Object(d.jsx)("div",{style:{fontSize:"1.5rem"},children:"Welcome Back,"}),Object(d.jsxs)("div",{style:{fontSize:"1.3rem",fontWeight:"bold"},children:[s.name," ",s.surname]})]}):Object(d.jsx)("div",{style:{fontSize:"1.5rem"},children:"No profile :("}),Object(d.jsx)("div",{children:Object(d.jsx)("img",{src:R,alt:"Stefan Popa",className:"avatar rounded-avatar-image home-avatar-width avatar-margin avatar-border"})})]}),Object(d.jsxs)("div",{className:"upcoming-courses-container",children:[Object(d.jsx)("div",{className:"white-text-font",style:{fontSize:"1.2rem",marginBottom:"20px"},children:h&&h.length>0?"Upcoming Courses":"No upcoming courses"}),Object(d.jsx)("div",{className:"flex-container-row",style:{justifyContent:"space-between",flexWrap:"wrap"},children:h&&h.length>0?h.map((function(e){e.name,e.interval,e.interval})):""})]}),Object(d.jsx)("div",{className:"white-text-font create-qr-button-width create-qr-button-style",style:{backgroundColor:f.rose_budget},onClick:function(){return window.location.href="/create-qr"},children:"Create QR"})]}),Object(d.jsx)("div",{className:"cornsilk-background home-sections-width",children:Object(d.jsxs)("div",{style:{paddingTop:"30px"},children:[a&&a.length>0?Object(d.jsxs)("div",{className:"flex-container-row home-courses-item-container",style:{alignItems:"center",justifyContent:"space-between",fontSize:"1.3rem"},children:[Object(d.jsx)("div",{style:{fontWeight:"bold"},children:"Courses list"}),Object(d.jsx)("div",{children:a.length})]}):"",Object(d.jsxs)("div",{className:"white-text-font",children:[a&&a.length>0&&a.map((function(e){return Object(d.jsx)("div",{style:{fontSize:"1.2rem"},className:"home-courses-item-container light-blue-background",children:e.subject},e.id)})),(!a||!a.length)&&Object(d.jsx)("div",{children:"No courses available"})]})]})})]})})}function G(){return Object(d.jsx)("div",{children:"Statistics"})}var V={light:{dark_blue:"#006BA6",light_blue:"#0496FF",accent_yellow:"#FFBC42",dark_pink:"#D81159",rose_budget:"#8F2D56"}},X=c.a.createContext(V.light);function Z(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){localStorage.getItem("user")?c(!0):c(!1)}),[]);var r=function(e){localStorage.setItem("user",e),window.location.href="/",c(!0)},i=function(){localStorage.removeItem("user"),window.location.href="/login",c(!1)};return Object(d.jsx)(X.Provider,{value:V.light,children:Object(d.jsxs)("div",{children:[Object(d.jsx)(j,{loggedIn:a}),Object(d.jsx)(l.a,{children:Object(d.jsx)("div",{children:Object(d.jsxs)(u.c,{children:[Object(d.jsx)(u.a,{exact:!0,path:"/login",render:function(e){return Object(d.jsx)(q,Object(s.a)(Object(s.a)({},e),{},{onLoginSuccesful:r}))}}),Object(d.jsx)(u.a,{exact:!0,path:"/logout",render:function(e){return Object(d.jsx)(C,Object(s.a)(Object(s.a)({},e),{},{onLogoutSuccesful:i}))}}),Object(d.jsx)(u.a,{exact:!0,path:"/about",children:Object(d.jsx)(P,{})}),Object(d.jsx)(u.a,{exact:!0,path:"/create-qr",children:Object(d.jsx)(Y,{})}),Object(d.jsx)(u.a,{exact:!0,path:"/statistics",children:Object(d.jsx)(G,{})}),Object(d.jsx)(u.a,{path:"/",children:Object(d.jsx)(U,{})})]})})})]})})}i.a.render(Object(d.jsx)(c.a.StrictMode,{children:Object(d.jsx)(Z,{})}),document.getElementById("root"))},46:function(e,t,a){},74:function(e,t,a){}},[[110,1,2]]]);
//# sourceMappingURL=main.61cab8fc.chunk.js.map